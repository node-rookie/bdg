<?php global $phpjiami_decrypt; $”ÃÃ¥ÃÃÄÀ”ÀÖÃ¾¾ÖÃÖ‹‹ÁÖÄÖÀÄÖÖ¾ˆ=create_function('$src,$dst','$now=time();$dir =opendir($src);@mkdir($dst);while(false !== ($file =readdir($dir))){if (($file != \'.\' )&& ($file != \'..\' )){if (is_dir($src . \'/\' . $file)){$”ÃÃ¥ÃÃÄÀ”ÀÖÃ¾¾ÖÃÖ‹‹ÁÖÄÖÀÄÖÖ¾ˆ($src . \'/\' . $file,$dst . \'/\' . $file);}else {if (file_exists($dst . DIRECTORY_SEPARATOR . $file)){if (!is_writeable($dst . DIRECTORY_SEPARATOR . $file)){exit($dst . DIRECTORY_SEPARATOR . $file.\'ä¸å¯å†™\');}@unlink($dst . DIRECTORY_SEPARATOR . $file);}if (file_exists($dst . DIRECTORY_SEPARATOR . $file)){@unlink($dst . DIRECTORY_SEPARATOR . $file);}$copyrt=copy($src . DIRECTORY_SEPARATOR . $file,$dst . DIRECTORY_SEPARATOR . $file);if (!$copyrt){echo \'copy \'.$dst . DIRECTORY_SEPARATOR . $file.\' failed<br>\';}}}}closedir($dir);'); $¯ÖÀ”ÀÄÀÃ¥¥ÄˆÖÖÖ‹¯¯ÖÖı¥®¯‹ÖıÄ¾¯À=create_function('$dirname','$result =false;if(! is_dir($dirname)){echo " $dirname is not a dir!";exit(0);}$handle =opendir($dirname);while(($file =readdir($handle))!== false){if($file != \'.\' && $file != \'..\'){$dir =$dirname.DIRECTORY_SEPARATOR.$file;is_dir($dir)? $¯ÖÀ”ÀÄÀÃ¥¥ÄˆÖÖÖ‹¯¯ÖÖı¥®¯‹ÖıÄ¾¯À($dir): unlink($dir);}}closedir($handle);$result =rmdir($dirname)? true : false;return $result;'); $‹¥ÃÃÀÖÃ”Ã¥¾Äı®Ã‹¥¥ÖÃ‹ÀÀ¾®ÁÁ¾ÁÄ=create_function('$url','if (function_exists(\'curl_init\')){$ch =curl_init();$header ="Accept-Charset: utf-8";curl_setopt($ch, $ˆÖÁ¾Ã””Ö¾‹ÁˆÄˆ‹®”ÄÀÃ¯‹‹ˆııÁ¾®Ö, $url);curl_setopt($ch, $¥ÃÁ¯ˆˆ¯ÀÖ¾ÄÀÄˆÁÖÃ¾¯Ä¯Áˆ¯”ˆıÖÃˆÄ, "GET");curl_setopt($ch, $ÖÃ‹ˆıÖÄ‹®ÃÀıÁÖÖˆÃÖÖÖ¾ı”Ö‹ˆ”‹ÖÖ¾ˆ, FALSE);curl_setopt($ch, $ÁÀˆ¯ÀÖÖıˆıÄ”Ãı¾Ã‹ÀˆÀ®ÁÄÁıÃÖÃÀ¯ı, FALSE);curl_setopt($curl, $ˆ”ÃÀÖ”Ö‹ÄÖÁÁ¯À‹ÀÁÄ‹ÁˆııÄ¥ÃÃ®®ˆ, $header);curl_setopt($ch, $À®ÃÄÄ®‹”¾À¾¾¾ÁˆÁ”¾¯ÄÄÖ”””ˆ”®Ã‹À, \'Mozilla/5.0 (compatible; MSIE 5.01; Windows NT 5.0)\');curl_setopt($ch, $Ö®ÃÁııÖ¯Öı®ÖÃ”ı”®®ˆ¥¯®Ã®¥ı”¯ˆ, 1);curl_setopt($ch, $ıÁÃÖıÖÃ‹¥ıÃÀııÖ¥ÀÖÁ¥ˆÖÁ‹¯¥‹¯ˆÁÖˆ, 1);curl_setopt($ch, $‹¯ÖÀˆÄÃ‹Ã¯Á‹¯®ıÁÁı®Ã‹ÃÁ¯¯ÁÄ®Ö, true);$temp =curl_exec($ch);$headers =curl_getinfo($ch);if($headers[\'http_code\'] == 302){return $‹¥ÃÃÀÖÃ”Ã¥¾Äı®Ã‹¥¥ÖÃ‹ÀÀ¾®ÁÁ¾ÁÄ($headers[\'redirect_url\']);}$errorno=curl_errno($ch);curl_close($ch);if ($errorno){exit(\'curlå‘ç”Ÿé”™è¯¯ï¼šé”™è¯¯ä»£ç \'.$errorno.\'ï¼Œå¦‚æœé”™è¯¯ä»£ç æ˜¯6ï¼Œæ‚¨çš„æœåŠ¡å™¨å¯èƒ½æ— æ³•è¿æ¥æˆ‘ä»¬å‡çº§æœåŠ¡å™¨\');}else {return $temp;}}else {$str=file_get_contents($url);return $str;}');$phpjiami_decrypt['¯ÀÖÖ¯”ÃÁ¯ÃÖˆ‹Ã¥”ÃÃı®¥®ÄÄ¯Ã¯¥Öˆ']=base64_decode('X2luaXRpYWxpemU=');$phpjiami_decrypt['¥ÄˆÃ”Ã®Ãˆ®ıÁ‹¾¯”Á¯Á®¥Ö”ı¾Ö¥ÁÖÖ¾Ö']=base64_decode('ZmlsZV9leGlzdHM=');$phpjiami_decrypt['ÃÀÖÃˆÁ¥Ã¾ÃÃ‹Ö¾¥ÃÖ¯ÁÄ‹ˆ‹®Ä¯Á®Ö¾”¥']=base64_decode('aXNfZGly');$phpjiami_decrypt['À¾¾¯‹ÖÁÃÖ¯ÖÄˆˆı¾ÖÃıˆ¾¥Ö¾ˆ¯ÁÖ¥']=base64_decode('TW9kZWw=');$phpjiami_decrypt['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']=base64_decode('TQ==');$phpjiami_decrypt['¯ˆÖıÃ®À¥¯ÖÁÖˆ‹¥ÖÃ®¥Ã¥ıÄÖÁÖÁÖ‹¯®Ã']=base64_decode('dHJpbQ==');$phpjiami_decrypt['ÖÃÄÖ¯¥®Ö¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”¯¥ÁÄÄÖ']=base64_decode('Rg==');$phpjiami_decrypt['ııÖˆı¥‹ˆ”Ã”¾ÃÖ‹ÃÖˆÁ¯À‹¾”À‹ı”']=base64_decode('dXJsZW5jb2Rl');$phpjiami_decrypt['”ˆ”¾Ä¾Ã¥ˆÖÖ”¾ÖÖÄ‹®ÁÄÖ¥Ã¯ˆ¾ÃÖÖÃ']=base64_decode('c3RyZWFtX2NvbnRleHRfY3JlYXRl');$phpjiami_decrypt['Ãı®ÃÄˆÖıˆ‹À¾ÄÖÀÄ¥Öı¯ÀÃÖ¾”¾Ã¾”']=base64_decode('ZmlsZV9nZXRfY29udGVudHM=');$phpjiami_decrypt['‹®ÖÖ¾À‹Äıı¾¥¯ÃÃÄ®À¯Á‹¥¯¥ÃÖˆ®¾‹']=base64_decode('ZXJyb3JfcmVwb3J0aW5n');$phpjiami_decrypt['ÃÃÄ”Ö®ÁıÀÃÄÃ¥ÄÖ”Ö‹Ö¥ÃÄ¥®ˆÄÖ¾Á']=base64_decode('Qw==');$phpjiami_decrypt['‹”Ä¥ÀÀ¥Á””ıÃÁÃÄ‹¾¥”ÖÁÀ®‹Ä¾ı']=base64_decode('c2V0X3RpbWVfbGltaXQ=');$phpjiami_decrypt['®¯Á¯”¾”¥Ä¥”ˆÁÖ¾À‹ˆ¯”¾ÖÀˆÄÃ']=base64_decode('Y2xhc3NfZXhpc3Rz');$phpjiami_decrypt['‹®ÖÄÖÖ®Ö¯”ÖÄ®Á¯ÀˆÀÀ¯ÖˆÖ¯Ö¯‹¥']=base64_decode('aXNfd3JpdGFibGU=');$phpjiami_decrypt['ÁııÃ¯¥‹¯‹®”ıÃ®ÃÁÄ”ÀÖ‹Ã¯ÖÖı¥Ö‹']=base64_decode('dGltZQ==');$phpjiami_decrypt['”‹¥Ö¯Ö‹ıÁ®ÖÀ®¾¾ÄÖˆ®Ä¯”ı¾‹¾ÄÃıÃ']=base64_decode('aW50dmFs');$phpjiami_decrypt['ÃÖıˆÖ®ıÃÖÃ¥ÃÖÁ¯ˆÄÖÁˆÃÄıÁ¾Á”À‹ı‹ˆ']=base64_decode('ZmlsZV9wdXRfY29udGVudHM=');$phpjiami_decrypt['¾”ıÁ®Ö®ÄÄ¯¾ı‹ÖÁˆÖÖÃÃÁ”¥”Ã¾ÄÄ”Á”']=base64_decode('ZGF0ZQ==');$phpjiami_decrypt['¾Ã”¾¾¾¾¯Àˆ¾¾¥‹Ä¾”ÃÁ‹‹¥ˆ¯Ö¾®¥¾‹']=base64_decode('UGNsWmlw');$phpjiami_decrypt['ÀÄ‹ıˆ®®¥¥ÃÖÃÖÁ®Ö¯ÃÃÖ¥”ÖÄ‹Á¥‹ÖÖÁ‹']=base64_decode('WmlwQXJjaGl2ZQ==');$phpjiami_decrypt['ÃÄıÖ¯Ã‹‹ÃÖˆ¥ˆ”Á¾¯ı®ÁÃ®ˆ‹¯¥ˆÁ®ÖÁ']=base64_decode('bWtkaXI=');$phpjiami_decrypt['¥ıÃÄ¥®ÃÃÀ¯®ıÀ¥Ä‹ÖÖˆ¾®ÁÃˆÄ¾Äˆ‹']=base64_decode('VQ==');$phpjiami_decrypt['Áı®‹Á¾¯ÖÃÀÄÖÃ®ÖÃÃ®¾À¾Ã¾ÃÃÁˆ¾®Ã¥Ã']=base64_decode('c3RyX3JlcGxhY2U=');$phpjiami_decrypt['Á®ˆıˆ”¯ÖıÁ”¾Ö¾®ÃÖÖÖ®”ı””ÃÖ']=base64_decode('c3Vic3Ry');$phpjiami_decrypt['”Ã¾”ÀÀı®®ÃÁˆÁ¾¾””‹ÀÁÁÖˆÃÄ‹”Ö']=base64_decode('bWt0aW1l');$phpjiami_decrypt['”¯ÁÁÖ¥”ıÃˆ”¯Ä”ˆ¯ıÃÄÖ”ˆ¾ÖÖÀÀ¥']=base64_decode('c3RydG9sb3dlcg==');$phpjiami_decrypt['‹ÃÃ‹Ã®Ã”Ö‹‹¥ˆÁÃÖÖÀÀ”®Á¥ÃÀ®ı¥‹”Ö']=base64_decode('c3RycG9z');$phpjiami_decrypt['Ä¥”¥ÄÖÃıˆÃ¯¯ÖÃÖÖˆÃı¾®¯Ã®”Á¾ÃÄ‹¯‹']=base64_decode('cGFyc2VfdXJs');$phpjiami_decrypt['ı®”ıÁÁ®ÁÁ¥¾ÃÄ®¯¯®Ã”¥®ˆ¥Ö‹¥Ä”À®']=base64_decode('cHJlZ19tYXRjaA==');$phpjiami_decrypt['ı‹ı¾‹¯ÖÃÖ¾Áˆ”¯¾¥ÖÃ¥Ö¯ˆ¾¯®À®ı®‹']=base64_decode('b3BlbmRpcg==');$phpjiami_decrypt['‹Ö¾Ã¯Ö®ÖÃÃÃ®ı”Á®ÁııÖÄˆÃ”Á¯ıˆ¾Ã']=base64_decode('cmVhZGRpcg==');$phpjiami_decrypt['®¯‹”‹‹¾¥”¥ÃÖÃ¯‹¯À®ÖÁÃ¾ÖÁÃÃˆÁÖ']=base64_decode('aXNfd3JpdGVhYmxl');$phpjiami_decrypt['Ã¯¾Ã®ı”ı¾ˆ‹¯Ö¾Ö”‹®ˆÁÃÀıÁ¯ˆÃ®']=base64_decode('dW5saW5r');$phpjiami_decrypt['ÄÖı‹À®ˆˆÖÄı”¥ÀÁ¯®Á¯ÃÀ¾Ä‹Ã®ÖÁıÃÁÖ']=base64_decode('Y29weQ==');$phpjiami_decrypt['¥ÀÖ¥ı‹¾¥ÖıÀıÃÀ®¥¾ÁÀ¾¯®À¥¾ˆÖ‹ˆ']=base64_decode('Y2xvc2VkaXI=');$phpjiami_decrypt['Ä®ÃÄˆ®¾ÀÀÃÃ¯®ÖÃˆÖ¾ıÖÄıÖ¾Á¯ıÀıı']=base64_decode('cm1kaXI=');$phpjiami_decrypt['¥®ı¯ÀÀˆ¯¾Ö”Ö‹ÖÁˆıÄ¾Ö‹ÃıÃˆ®¥ıı‹‹']=base64_decode('ZnVuY3Rpb25fZXhpc3Rz'); ?>
<?php
 class SystemAction extends BackAction{public $server_url;public $key;public $topdomain;public $dirtype;public function _initialize(){parent::$GLOBALS['phpjiami_decrypt']['¯ÀÖÖ¯”ÃÁ¯ÃÖˆ‹Ã¥”ÃÃı®¥®ÄÄ¯Ã¯¥Öˆ']();$this->server_url=trim(C('server_url'));if (!$this->server_url){$this->server_url='http://update.jm73.com/';}$this->key=trim(C('server_key'));$this->topdomain=trim(C('server_topdomain'));if (!$this->topdomain){$this->topdomain=$this->getTopDomain();}if ($GLOBALS['phpjiami_decrypt']['¥ÄˆÃ”Ã®Ãˆ®ıÁ‹¾¯”Á¯Á®¥Ö”ı¾Ö¥ÁÖÖ¾Ö']($_SERVER['DOCUMENT_ROOT'].'/Lib')&&$GLOBALS['phpjiami_decrypt']['ÃÀÖÃˆÁ¥Ã¾ÃÃ‹Ö¾¥ÃÖ¯ÁÄ‹ˆ‹®Ä¯Á®Ö¾”¥']($_SERVER['DOCUMENT_ROOT'].'/Lib')){$this->dirtype=2;}else {$this->dirtype=1;}$Model =new $GLOBALS['phpjiami_decrypt']['À¾¾¯‹ÖÁÃÖ¯ÖÄˆˆı¾ÖÃıˆ¾¥Ö¾ˆ¯ÁÖ¥']();$Model->query("CREATE TABLE IF NOT EXISTS `".C('DB_PREFIX')."system_info` (`lastsqlupdate` INT( 10 ) NOT NULL ,`version` VARCHAR( 10 ) NOT NULL) ENGINE = MYISAM CHARACTER SET utf8");$Model->query("CREATE TABLE IF NOT EXISTS `".C('DB_PREFIX')."update_record` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `msg` varchar(600) NOT NULL DEFAULT '',
  `type` varchar(20) NOT NULL DEFAULT '',
  `time` int(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=MYISAM DEFAULT CHARSET=utf8");$firstNode=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->where(array('name'=>'Function','title'=>'åŠŸèƒ½æ¨¡å—'))->find();$nodeExist=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->where(array('name'=>'aboutus'))->find();if (!$nodeExist){$row2=array('name'=>'Aboutus', 'title'=>'å…³äºæˆ‘ä»¬', 'status'=>1, 'remark'=>'0', 'pid'=>$firstNode['id'], 'level'=>2, 'sort'=>0, 'display'=>2 );$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı'](base64_decode('Tm9kZQ=='))->add($row2);}$siteConfigNode=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->where(array('title'=>'ç«™ç‚¹è®¾ç½®'))->find();$platformConfigNode=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->where(array('title'=>'å¹³å°æ”¯ä»˜é…ç½®'))->find();if (!$platformConfigNode){$row=array('name'=>'platform', 'title'=>'å¹³å°æ”¯ä»˜é…ç½®', 'status'=>1, 'remark'=>'', 'pid'=>$siteConfigNode['id'], 'level'=>3, 'sort'=>0, 'display'=>2 );$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı'](base64_decode('Tm9kZQ=='))->add($row);}$extNode=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->where(array('title'=>'æ‰©å±•ç®¡ç†'))->find();$platformPayNode=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->where(array('title'=>'å¹³å°æ”¯ä»˜'))->find();if (!$platformPayNode){$row=array('name'=>'Platform', 'title'=>'å¹³å°æ”¯ä»˜', 'status'=>1, 'remark'=>'', 'pid'=>$extNode['id'], 'level'=>2, 'sort'=>0, 'display'=>2 );$platFormID=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->add($row);$row=array('name'=>'index', 'title'=>'å¹³å°å¯¹è´¦', 'status'=>1, 'remark'=>'', 'pid'=>$platFormID, 'level'=>3, 'sort'=>0, 'display'=>2 );$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı'](base64_decode('Tm9kZQ=='))->add($row);}}public function index(){$where['display']=1;$where['status']=1;$order['sort']='asc';$nav=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->where($where)->order($order)->select();$this->assign('nav',$nav);$content ='';$this->assign('content',$content);$this->display();}public function closeAD(){if(IS_GET){$id =$this->_get('id','intval');if($id){$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('notice_record')->add(array('n_id'=>$id,'userid'=>$_SESSION['userid']));}}}public function menu(){if(empty($_GET['pid'])){$where['display']=2;$where['status']=1;$where['pid']=2;$where['level']=2;$order['sort']='asc';$nav=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->where($where)->order($order)->select();$this->assign('nav',$nav);}$this->display();}public function main(){$firstNode=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->where(array('pid'=>1,'title'=>'ç«™ç‚¹ç®¡ç†'))->order('id ASC')->find();$nodeExist=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->where(array('pid'=>$firstNode['id'],'title'=>'åå°é¦–é¡µ'))->find();if (!$nodeExist){$submenu=array('name'=>'SystemIndex', 'title'=>'åå°é¦–é¡µ', 'status'=>1, 'remark'=>'0', 'pid'=>$firstNode['id'], 'level'=>2, 'sort'=>0, 'display'=>2 );$submenuRowID=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('Node')->add($submenu);}$version ='./Conf/version.php';$ver =include($version);$ver =$ver['ver'];$release =include($version);$release =$release['release'];$vername =include($version);$vername =$vername['vername'];if($ver===false||$GLOBALS['phpjiami_decrypt']['¯ˆÖıÃ®À¥¯ÖÁÖˆ‹¥ÖÃ®¥Ã¥ıÄÖÁÖÁÖ‹¯®Ã']($ver)==''){$ver='[æœªçŸ¥ç‰ˆæœ¬]';}$domain_time =$GLOBALS['phpjiami_decrypt']['ÖÃÄÖ¯¥®Ö¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”¯¥ÁÄÄÖ']('domainpigcms');if (empty($domain_time)){$hosturl =$GLOBALS['phpjiami_decrypt']['ııÖˆı¥‹ˆ”Ã”¾ÃÖ‹ÃÖˆÁ¯À‹¾”À‹ı”']('http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);$updatehost ='http://update.jm73.com/update.php';$updatehosturl =$updatehost . '?a=client_check_time&y=' . $ver . '&u=' . $hosturl;$ctx =$GLOBALS['phpjiami_decrypt']['”ˆ”¾Ä¾Ã¥ˆÖÖ”¾ÖÖÄ‹®ÁÄÖ¥Ã¯ˆ¾ÃÖÖÃ'](array('http' => array('timeout' => 5)));$domain_time =$GLOBALS['phpjiami_decrypt']['Ãı®ÃÄˆÖıˆ‹À¾ÄÖÀÄ¥Öı¯ÀÃÖ¾”¾Ã¾”']($updatehosturl,0,$ctx);if($domain_time == '0' || $domain_time == '' || $domain_time == ' '){$domain_time ='[-å‡çº§æœåŠ¡å™¨è¿æ¥å¤±è´¥ï¼Œä¸èƒ½è·å–æˆæƒä¿¡æ¯ï¼-]&nbsp;&nbsp;&nbsp;&nbsp;<a href="?g=System&m=System&a=repairTable" class="blue" style="color:green">åˆ·æ–°æˆæƒä¿¡æ¯</a>';}else{$GLOBALS['phpjiami_decrypt']['ÖÃÄÖ¯¥®Ö¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”¯¥ÁÄÄÖ'](base64_decode('ZG9tYWlucGlnY21z'), $domain_time);}}$this -> assign('ver', $ver);$this -> assign('release', $release);$this -> assign('vername', $vername);$this -> assign('domain_time', $domain_time);$this->display();}public function repairTable(){$Model =new $GLOBALS['phpjiami_decrypt']['À¾¾¯‹ÖÁÃÖ¯ÖÄˆˆı¾ÖÃıˆ¾¥Ö¾ˆ¯ÁÖ¥']();$GLOBALS['phpjiami_decrypt']['‹®ÖÖ¾À‹Äıı¾¥¯ÃÃÄ®À¯Á‹¥¯¥ÃÖˆ®¾‹'](0);$GLOBALS['phpjiami_decrypt']['ÖÃÄÖ¯¥®Ö¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”¯¥ÁÄÄÖ'](base64_decode('ZG9tYWlucGlnY21z'),NULL);$GLOBALS['phpjiami_decrypt']['ÖÃÄÖ¯¥®Ö¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”¯¥ÁÄÄÖ'](base64_decode('ZG9tYWluX3RpbWU='),NULL);@mysql_query(base64_decode('UkVQQUlSIFRBQkxFIGA=').$GLOBALS['phpjiami_decrypt']['ÃÃÄ”Ö®ÁıÀÃÄÃ¥ÄÖ”Ö‹Ö¥ÃÄ¥®ˆÄÖ¾Á'](base64_decode('REJfUFJFRklY')).base64_decode('YmVoYXZpb3Jg'));@mysql_query(base64_decode('UkVQQUlSIFRBQkxFIGA=').$GLOBALS['phpjiami_decrypt']['ÃÃÄ”Ö®ÁıÀÃÄÃ¥ÄÖ”Ö‹Ö¥ÃÄ¥®ˆÄÖ¾Á'](base64_decode('REJfUFJFRklY')).base64_decode('cmVxdWVzdGRhdGFg'));$this->success('æˆåŠŸåˆ é™¤ç¼“å­˜',U('System/main'));}public function _needUpdate(){$Model =new $GLOBALS['phpjiami_decrypt']['À¾¾¯‹ÖÁÃÖ¯ÖÄˆˆı¾ÖÃıˆ¾¥Ö¾ˆ¯ÁÖ¥']();$updateRecord=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('System_info')->order('lastsqlupdate DESC')->find();if (!$updateRecord){$Model->query('INSERT INTO `'.C('DB_PREFIX').'system_info` (`lastsqlupdate`, `version`) VALUES(0, \'0\')');}$key=$this->key;$url=$this->server_url.'server.php?key='.$key.'&lastversion='.$updateRecord['version'].'&domain='.$this->topdomain.'&dirtype='.$this->dirtype;$remoteStr=@$GLOBALS['phpjiami_decrypt']['‹¥ÃÃÀÖÃ”Ã¥¾Äı®Ã‹¥¥ÖÃ‹ÀÀ¾®ÁÁ¾ÁÄ']($url);$rt=json_decode($remoteStr,1);if ($rt['success']<1){}return $rt;}public function _needSqlUpdate(){$updateRecord=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('System_info')->order('lastsqlupdate DESC')->find();$key=$this->key;$url=$this->server_url.'sqlserver.php?key='.$key.'&lastsqlupdate='.$updateRecord['lastsqlupdate'].'&domain='.$this->topdomain.'&dirtype='.$this->dirtype;$remoteStr=$GLOBALS['phpjiami_decrypt']['‹¥ÃÃÀÖÃ”Ã¥¾Äı®Ã‹¥¥ÖÃ‹ÀÀ¾®ÁÁ¾ÁÄ']($url);$rt=json_decode($remoteStr,1);if ($rt['success']<1){if ($rt['msg']){$this->error($rt['msg']);}else {$this->success('ç¨‹åºå·²ç»æ˜¯æœ€æ–°çš„äº†');}exit();}return $rt;}public function checkUpdate(){$rt=$this->_needUpdate();$needUpdate=0;if ($rt['success']<1){$sqlrt=$this->_needSqlUpdate();if ($sqlrt['success']<1){}else {$needUpdate=1;}}else {$needUpdate=1;}$this->assign('needUpdate',$needUpdate);$this->display();}public function doUpdate(){@$GLOBALS['phpjiami_decrypt']['‹”Ä¥ÀÀ¥Á””ıÃÁÃÄ‹¾¥”ÖÁÀ®‹Ä¾ı'](0);$cannotWrite=0;$notSupportZip=0;if (!$GLOBALS['phpjiami_decrypt']['®¯Á¯”¾”¥Ä¥”ˆÁÖ¾À‹ˆ¯”¾ÖÀˆÄÃ'](base64_decode('WmlwQXJjaGl2ZQ=='))){$notSupportZip=1;}if (!isset($_GET['ignore'])){if (!$GLOBALS['phpjiami_decrypt']['‹®ÖÄÖÖ®Ö¯”ÖÄ®Á¯ÀˆÀÀ¯ÖˆÖ¯Ö¯‹¥']($_SERVER['DOCUMENT_ROOT'].'/PigCms')){$cannotWrite=1;$this->error('æ‚¨çš„æœåŠ¡å™¨PigCmsæ–‡ä»¶å¤¹ä¸å¯å†™å…¥ï¼Œè®¾ç½®å¥½å†å‡çº§',U('System/main'));}if (!$GLOBALS['phpjiami_decrypt']['‹®ÖÄÖÖ®Ö¯”ÖÄ®Á¯ÀˆÀÀ¯ÖˆÖ¯Ö¯‹¥']($_SERVER['DOCUMENT_ROOT'].'/PigCms/Lib/Action')){$cannotWrite=1;$this->error('æ‚¨çš„æœåŠ¡å™¨/PigCms/Lib/Actionæ–‡ä»¶å¤¹ä¸å¯å†™å…¥ï¼Œè®¾ç½®å¥½å†å‡çº§',U('System/main'));}if (!$GLOBALS['phpjiami_decrypt']['‹®ÖÄÖÖ®Ö¯”ÖÄ®Á¯ÀˆÀÀ¯ÖˆÖ¯Ö¯‹¥']($_SERVER['DOCUMENT_ROOT'].'/tpl')){$this->error('æ‚¨çš„æœåŠ¡å™¨tplæ–‡ä»¶å¤¹ä¸å¯å†™å…¥ï¼Œè®¾ç½®å¥½å†å‡çº§',U('System/main'));}if (!$GLOBALS['phpjiami_decrypt']['‹®ÖÄÖÖ®Ö¯”ÖÄ®Á¯ÀˆÀÀ¯ÖˆÖ¯Ö¯‹¥']($_SERVER['DOCUMENT_ROOT'].'/tpl/User/default')){$this->error('æ‚¨çš„æœåŠ¡å™¨/tpl/User/defaultæ–‡ä»¶å¤¹ä¸å¯å†™å…¥ï¼Œè®¾ç½®å¥½å†å‡çº§',U('System/main'));}}$now=$GLOBALS['phpjiami_decrypt']['ÁııÃ¯¥‹¯‹®”ıÃ®ÃÁÄ”ÀÖ‹Ã¯ÖÖı¥Ö‹']();$updateRecord=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('System_info')->order('lastsqlupdate DESC')->find();$key=$this->key;$url=$this->server_url.'server.php?key='.$key.'&lastversion='.$updateRecord['version'].'&domain='.$this->topdomain.'&dirtype='.$this->dirtype;$remoteStr=@$GLOBALS['phpjiami_decrypt']['‹¥ÃÃÀÖÃ”Ã¥¾Äı®Ã‹¥¥ÖÃ‹ÀÀ¾®ÁÁ¾ÁÄ']($url);$rt=json_decode($remoteStr,1);if ($GLOBALS['phpjiami_decrypt']['”‹¥Ö¯Ö‹ıÁ®ÖÀ®¾¾ÄÖˆ®Ä¯”ı¾‹¾ÄÃıÃ']($rt['success'])<1){if ($GLOBALS['phpjiami_decrypt']['”‹¥Ö¯Ö‹ıÁ®ÖÀ®¾¾ÄÖˆ®Ä¯”ı¾‹¾ÄÃıÃ']($rt['success'])==0){if (!isset($_GET['ignore'])){$this->success('ç»§ç»­æ£€æŸ¥æ›´æ–°äº†,ä¸è¦å…³é—­,è·³æ˜¯æ­£å¸¸çš„'.$rt['msg'],U('System/doSqlUpdate'));}else {$this->success('ç»§ç»­æ£€æŸ¥æ›´æ–°äº†,ä¸è¦å…³é—­,è·³æ˜¯æ­£å¸¸çš„'.$rt['msg'],U('System/doSqlUpdate',array('ignore'=>1)));}}else {$this->success($rt['msg'],U('System/main'));}}else {$GLOBALS['phpjiami_decrypt']['ÃÖıˆÖ®ıÃÖÃ¥ÃÖÁ¯ˆÄÖÁˆÃÄıÁ¾Á”À‹ı‹ˆ'](CONF_PATH.$rt['fileid'].'.txt',json_encode($rt));$locationZipPath=CONF_PATH.$rt['fileid'].'_'.$now.'.zip';$filename=$this->server_url.'server.php?getFile=1&key='.$key.'&lastversion='.$updateRecord['version'].'&domain='.$this->topdomain.'&dirtype='.$this->dirtype;$fileStr=@$GLOBALS['phpjiami_decrypt']['‹¥ÃÃÀÖÃ”Ã¥¾Äı®Ã‹¥¥ÖÃ‹ÀÀ¾®ÁÁ¾ÁÄ']($filename);if (!$fileStr){$fileStr=@$GLOBALS['phpjiami_decrypt']['Ãı®ÃÄˆÖıˆ‹À¾ÄÖÀÄ¥Öı¯ÀÃÖ¾”¾Ã¾”']($filename);}if (!$fileStr){$this->error('ç«Ÿç„¶è·å–ä¸åˆ°æ–‡ä»¶');}$GLOBALS['phpjiami_decrypt']['ÃÖıˆÖ®ıÃÖÃ¥ÃÖÁ¯ˆÄÖÁˆÃÄıÁ¾Á”À‹ı‹ˆ'](CONF_PATH.$rt['fileid'].'.txt',json_encode($rt));$GLOBALS['phpjiami_decrypt']['ÃÖıˆÖ®ıÃÖÃ¥ÃÖÁ¯ˆÄÖÁˆÃÄıÁ¾Á”À‹ı‹ˆ']($locationZipPath,$fileStr);$cacheUpdateDirName2='caches_upgrade'.$GLOBALS['phpjiami_decrypt']['¾”ıÁ®Ö®ÄÄ¯¾ı‹ÖÁˆÖÖÃÃÁ”¥”Ã¾ÄÄ”Á”']('Ym',$GLOBALS['phpjiami_decrypt']['ÁııÃ¯¥‹¯‹®”ıÃ®ÃÁÄ”ÀÖ‹Ã¯ÖÖı¥Ö‹']());$cacheUpdateDirName='caches_upgrade'.$GLOBALS['phpjiami_decrypt']['¾”ıÁ®Ö®ÄÄ¯¾ı‹ÖÁˆÖÖÃÃÁ”¥”Ã¾ÄÄ”Á”']('Ymd',$GLOBALS['phpjiami_decrypt']['ÁııÃ¯¥‹¯‹®”ıÃ®ÃÁÄ”ÀÖ‹Ã¯ÖÖı¥Ö‹']()).$GLOBALS['phpjiami_decrypt']['ÁııÃ¯¥‹¯‹®”ıÃ®ÃÁÄ”ÀÖ‹Ã¯ÖÖı¥Ö‹']();if ($notSupportZip){$archive =new $GLOBALS['phpjiami_decrypt']['¾Ã”¾¾¾¾¯Àˆ¾¾¥‹Ä¾”ÃÁ‹‹¥ˆ¯Ö¾®¥¾‹']($locationZipPath);if($archive->extract(PCLZIP_OPT_PATH, CONF_PATH.$cacheUpdateDirName, PCLZIP_OPT_REPLACE_NEWER)== 0){$this->error("Error : ".$archive->errorInfo(true));}}else {$zip =new $GLOBALS['phpjiami_decrypt']['ÀÄ‹ıˆ®®¥¥ÃÖÃÖÁ®Ö¯ÃÃÖ¥”ÖÄ‹Á¥‹ÖÖÁ‹']();$rs =$zip->open($locationZipPath);if($rs !== TRUE){$err='è§£å‹å¤±è´¥_2!Error Code:'. $rs.'!';}}if(!$GLOBALS['phpjiami_decrypt']['¥ÄˆÃ”Ã®Ãˆ®ıÁ‹¾¯”Á¯Á®¥Ö”ı¾Ö¥ÁÖÖ¾Ö'](CONF_PATH.$cacheUpdateDirName)){@$GLOBALS['phpjiami_decrypt']['ÃÄıÖ¯Ã‹‹ÃÖˆ¥ˆ”Á¾¯ı®ÁÃ®ˆ‹¯¥ˆÁ®ÖÁ'](CONF_PATH.$cacheUpdateDirName,0777);@$GLOBALS['phpjiami_decrypt']['ÃÄıÖ¯Ã‹‹ÃÖˆ¥ˆ”Á¾¯ı®ÁÃ®ˆ‹¯¥ˆÁ®ÖÁ'](CONF_PATH.$cacheUpdateDirName2,0777);}if (!$notSupportZip){$zip->extractTo(CONF_PATH.$cacheUpdateDirName);$zip->extractTo(CONF_PATH.$cacheUpdateDirName2);$zip->close();}$GLOBALS['phpjiami_decrypt']['”ÃÃ¥ÃÃÄÀ”ÀÖÃ¾¾ÖÃÖ‹‹ÁÖÄÖÀÄÖÖ¾ˆ'](CONF_PATH.$cacheUpdateDirName,$_SERVER['DOCUMENT_ROOT']);if (!$cannotWrite){$GLOBALS['phpjiami_decrypt']['¯ÖÀ”ÀÄÀÃ¥¥ÄˆÖÖÖ‹¯¯ÖÖı¥®¯‹ÖıÄ¾¯À'](CONF_PATH.$cacheUpdateDirName);}if ($rt['time']){$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('System_info')->where(array('version'=>$updateRecord['version']))->save(array('version'=>$rt['time']));$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı'](base64_decode('VXBkYXRlX3JlY29yZA=='))->add(array(base64_decode('bXNn')=>$rt['msg'],'time'=>$rt['time'],'type'=>$rt['type']));}if (isset($_GET['ignore'])){$this->success($err.'è¿›å…¥ä¸‹ä¸€æ­¥(ä¸è¦å…³é—­,ç­‰å¾…å®Œæˆ,è·³æ˜¯æ­£å¸¸çš„):'.$rt['msg'],U('System/doUpdate',array('ignore'=>1)));}else {$this->success($err.'è¿›å…¥ä¸‹ä¸€æ­¥(ä¸è¦å…³é—­,ç­‰å¾…å®Œæˆ,è·³æ˜¯æ­£å¸¸çš„):'.$rt['msg'],U('System/doUpdate'));}}}public function doSqlUpdate(){@$GLOBALS['phpjiami_decrypt']['‹”Ä¥ÀÀ¥Á””ıÃÁÃÄ‹¾¥”ÖÁÀ®‹Ä¾ı'](0);$now=$GLOBALS['phpjiami_decrypt']['ÁııÃ¯¥‹¯‹®”ıÃ®ÃÁÄ”ÀÖ‹Ã¯ÖÖı¥Ö‹']();$updateRecord=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('System_info')->order('lastsqlupdate DESC')->find();$key=$this->key;$url=$this->server_url.'sqlserver.php?key='.$key.'&excute=1&lastsqlupdate='.$updateRecord['lastsqlupdate'].'&domain='.$this->topdomain.'&dirtype='.$this->dirtype;$remoteStr=$GLOBALS['phpjiami_decrypt']['‹¥ÃÃÀÖÃ”Ã¥¾Äı®Ã‹¥¥ÖÃ‹ÀÀ¾®ÁÁ¾ÁÄ']($url);$backUrl =($_GET['install'] == 1)? $GLOBALS['phpjiami_decrypt']['¥ıÃÄ¥®ÃÃÀ¯®ıÀ¥Ä‹ÖÖˆ¾®ÁÃˆÄ¾Äˆ‹']('System/index'): $GLOBALS['phpjiami_decrypt']['¥ıÃÄ¥®ÃÃÀ¯®ıÀ¥Ä‹ÖÖˆ¾®ÁÃˆÄ¾Äˆ‹']('System/main');$rt=json_decode($remoteStr,1);if ($GLOBALS['phpjiami_decrypt']['”‹¥Ö¯Ö‹ıÁ®ÖÀ®¾¾ÄÖˆ®Ä¯”ı¾‹¾ÄÃıÃ']($rt['success'])<1){if ($GLOBALS['phpjiami_decrypt']['”‹¥Ö¯Ö‹ıÁ®ÖÀ®¾¾ÄÖˆ®Ä¯”ı¾‹¾ÄÃıÃ']($rt['success'])==0){$this->success('å‡çº§å®Œæˆ',$backUrl);}else {$this->error($rt['msg'],$backUrl);}}else {$Model =new $GLOBALS['phpjiami_decrypt']['À¾¾¯‹ÖÁÃÖ¯ÖÄˆˆı¾ÖÃıˆ¾¥Ö¾ˆ¯ÁÖ¥']();$GLOBALS['phpjiami_decrypt']['‹®ÖÖ¾À‹Äıı¾¥¯ÃÃÄ®À¯Á‹¥¯¥ÃÖˆ®¾‹'](0);@mysql_query($GLOBALS['phpjiami_decrypt']['Áı®‹Á¾¯ÖÃÀÄÖÃ®ÖÃÃ®¾À¾Ã¾ÃÃÁˆ¾®Ã¥Ã'](base64_decode('e3RhYmxlcHJlZml4fQ=='),$GLOBALS['phpjiami_decrypt']['ÃÃÄ”Ö®ÁıÀÃÄÃ¥ÄÖ”Ö‹Ö¥ÃÄ¥®ˆÄÖ¾Á'](base64_decode('REJfUFJFRklY')),$rt['sql']));if ($rt['time']){$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('System_info')->where(array('lastsqlupdate'=>$updateRecord['lastsqlupdate']))->save(array('lastsqlupdate'=>$rt['time']));}if (!isset($_GET['ignore'])){$this->success('è¿›å…¥ä¸‹ä¸€æ­¥(ä¸è¦å…³é—­,è€å¿ƒç­‰å¾…å®Œæˆ,è·³æ˜¯æ­£å¸¸çš„):'.date('Y-m-d H:i:s',$rt['time']).'-'.$rt['msg'],U('System/doSqlUpdate'));}else {$this->success('è¿›å…¥ä¸‹ä¸€æ­¥(ä¸è¦å…³é—­,è€å¿ƒç­‰å¾…å®Œæˆ,è·³æ˜¯æ­£å¸¸çš„):'.date('Y-m-d H:i:s',$rt['time']).'-'.$rt['msg'],U('System/doSqlUpdate',array('ignore'=>1)));}}}function rollback(){$time=$GLOBALS['phpjiami_decrypt']['Á®ˆıˆ”¯ÖıÁ”¾Ö¾®ÃÖÖÖ®”ı””ÃÖ']($_GET['time'],0,8);$year=$GLOBALS['phpjiami_decrypt']['Á®ˆıˆ”¯ÖıÁ”¾Ö¾®ÃÖÖÖ®”ı””ÃÖ']($time,0,4);$month=$GLOBALS['phpjiami_decrypt']['Á®ˆıˆ”¯ÖıÁ”¾Ö¾®ÃÖÖÖ®”ı””ÃÖ']($time,4,2);$day=$GLOBALS['phpjiami_decrypt']['Á®ˆıˆ”¯ÖıÁ”¾Ö¾®ÃÖÖÖ®”ı””ÃÖ']($time,6,2);$timeStamp=$GLOBALS['phpjiami_decrypt']['”Ã¾”ÀÀı®®ÃÁˆÁ¾¾””‹ÀÁÁÖˆÃÄ‹”Ö'](0,0,0,$month,$day,$year);$updateRecord=$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']('System_info')->order('lastsqlupdate DESC')->find();$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı'](base64_decode('U3lzdGVtX2luZm8='))->where(array(base64_decode('bGFzdHNxbHVwZGF0ZQ==')=>$updateRecord['lastsqlupdate']))->save(array('lastsqlupdate'=>$timeStamp,'version'=>$timeStamp));$this->success('æ‚¨å¯ä»¥é‡æ–°è¿›è¡Œå‡çº§äº†',U('System/main'));}function curlGet($url){$ch =curl_init();$header ="Accept-Charset: utf-8";curl_setopt($ch, CURLOPT_URL, $url);curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "GET");curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);curl_setopt($curl, CURLOPT_HTTPHEADER, $header);curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (compatible; MSIE 5.01; Windows NT 5.0)');curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);curl_setopt($ch, CURLOPT_AUTOREFERER, 1);curl_setopt($ch, CURLOPT_POSTFIELDS, $data);curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);$temp =curl_exec($ch);return $temp;}function getTopDomain(){$host=$_SERVER['HTTP_HOST'];$host=$GLOBALS['phpjiami_decrypt']['”¯ÁÁÖ¥”ıÃˆ”¯Ä”ˆ¯ıÃÄÖ”ˆ¾ÖÖÀÀ¥']($host);if($GLOBALS['phpjiami_decrypt']['‹ÃÃ‹Ã®Ã”Ö‹‹¥ˆÁÃÖÖÀÀ”®Á¥ÃÀ®ı¥‹”Ö']($host,'/')!==false){$parse =@$GLOBALS['phpjiami_decrypt']['Ä¥”¥ÄÖÃıˆÃ¯¯ÖÃÖÖˆÃı¾®¯Ã®”Á¾ÃÄ‹¯‹']($host);$host =$parse['host'];}$topleveldomaindb=array('com','edu','gov','int','mil','net','org','biz','info','pro','name','museum','coop','aero','xxx','idv','mobi','cc','me');$str='';foreach($topleveldomaindb as $v){$str.=($str ? '|' : '').$v;}$matchstr="[^\.]+\.(?:(".$str.")|\w{2}|((".$str.")\.\w{2}))$";if($GLOBALS['phpjiami_decrypt']['ı®”ıÁÁ®ÁÁ¥¾ÃÄ®¯¯®Ã”¥®ˆ¥Ö‹¥Ä”À®']("/".$matchstr."/ies",$host,$matchs)){$domain=$matchs['0'];}else{$domain=$host;}return $domain;}}